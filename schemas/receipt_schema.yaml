title: "Receipt Schema"
description: "Schema for receipt data extracted from PDF documents"

fields:
  merchant_name:
    type: string
    label: "Merchant Name"
    required: true
    min_length: 2
    max_length: 200
    help: "Name of the merchant or store"
    
  receipt_number:
    type: string
    label: "Receipt Number"
    required: false
    pattern: "^[A-Z0-9-_]+$"
    max_length: 50
    help: "Receipt number or transaction ID"
    
  transaction_date:
    type: date
    label: "Transaction Date"
    required: true
    help: "Date of the transaction"
    
  transaction_time:
    type: string
    label: "Transaction Time"
    required: false
    pattern: "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
    help: "Time of transaction (HH:MM format)"
    
  total_amount:
    type: number
    label: "Total Amount"
    required: true
    min_value: 0
    max_value: 100000
    help: "Total amount paid"
    
  currency:
    type: enum
    label: "Currency"
    required: false
    default: "USD"
    choices: ["USD", "EUR", "GBP", "CAD", "AUD"]
    help: "Currency code for the amount"
    
  payment_method:
    type: enum
    label: "Payment Method"
    required: false
    choices: ["Cash", "Credit Card", "Debit Card", "Check", "Mobile Payment", "Other"]
    help: "Method of payment used"
    
  card_last_four:
    type: string
    label: "Card Last Four Digits"
    required: false
    pattern: "^[0-9]{4}$"
    help: "Last four digits of card if applicable"
    
  items:
    type: array
    label: "Items"
    required: false
    help: "Items purchased"
    items:
      type: object
      properties:
        item_name:
          type: string
          label: "Item Name"
          required: true
          max_length: 200
        quantity:
          type: number
          label: "Quantity"
          required: false
          min_value: 0
        unit_price:
          type: number
          label: "Unit Price"
          required: false
          min_value: 0
        total_price:
          type: number
          label: "Total Price"
          required: true
          min_value: 0
        
  subtotal:
    type: number
    label: "Subtotal"
    required: false
    min_value: 0
    help: "Amount before tax"
    
  tax_amount:
    type: number
    label: "Tax Amount"
    required: false
    min_value: 0
    help: "Total tax amount"
    
  tax_rate:
    type: number
    label: "Tax Rate"
    required: false
    min_value: 0
    max_value: 1
    help: "Tax rate as decimal (e.g., 0.08 for 8%)"
    
  discount_amount:
    type: number
    label: "Discount Amount"
    required: false
    min_value: 0
    help: "Total discount applied"
    
  tip_amount:
    type: number
    label: "Tip Amount"
    required: false
    min_value: 0
    help: "Tip amount if applicable"
    
  merchant_address:
    type: array
    label: "Merchant Address"
    required: false
    help: "Merchant location information"
    items:
      type: object
      properties:
        street_address:
          type: string
          label: "Street Address"
          required: false
          max_length: 200
        city:
          type: string
          label: "City"
          required: false
          max_length: 100
        state_province:
          type: string
          label: "State/Province"
          required: false
          max_length: 100
        postal_code:
          type: string
          label: "Postal Code"
          required: false
          pattern: "^[A-Z0-9\\s-]+$"
          max_length: 20
        country:
          type: string
          label: "Country"
          required: false
          max_length: 100

  category:
    type: enum
    label: "Category"
    required: false
    choices: ["Food & Dining", "Gas & Automotive", "Shopping", "Entertainment", "Travel", "Healthcare", "Other"]
    help: "Expense category"
    
  notes:
    type: string
    label: "Notes"
    required: false
    max_length: 500
    multiline: true
    help: "Additional notes or comments"
    
  extracted_confidence:
    type: number
    label: "Extraction Confidence"
    required: false
    min_value: 0
    max_value: 1
    readonly: true
    help: "AI extraction confidence score (0-1)"
    
  extraction_timestamp:
    type: date
    label: "Extraction Date"
    required: false
    readonly: true
    help: "Date when this data was extracted from the PDF"
